import { LoggerService } from '../logger/logger.service';
/**
 * Trace decorator
 *
 * @export
 * @returns
 */
export function Trace() {
    var printArgs = function (className, methodName, args) {
        LoggerService.self.trace('=> ' + className + '.' + methodName + '(' + args
            ? args.join(',')
            : '' + ')');
    };
    return function (target, name, descriptor) {
        if (descriptor) {
            // decorating a method
            var original_1 = descriptor.value;
            // tslint:disable-next-line: typedef
            descriptor.value = function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                printArgs(target.constructor.name, name, args);
                var ret = original_1.apply(this, args);
                ret = ret !== undefined ? ret : '';
                LoggerService.self.trace('<= ' + target.constructor.name + '.' + name + ': ' + ret);
                return ret;
            };
            return descriptor;
        }
        else {
            Object.getOwnPropertyNames(target.prototype).forEach(function (methodName) {
                var original = target.prototype[methodName];
                if (typeof original !== 'function' || methodName === 'constructor') {
                    return;
                }
                // tslint:disable-next-line: typedef
                target.prototype[methodName] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    printArgs(target.name, methodName, args);
                    var ret = original.apply(this, args);
                    ret = ret !== undefined ? ret : '';
                    LoggerService.self.trace('<= ' + target.name + '.' + methodName + ': ' + ret);
                    return ret;
                };
            });
            return target;
        }
    };
}
//# sourceMappingURL=trace.js.map